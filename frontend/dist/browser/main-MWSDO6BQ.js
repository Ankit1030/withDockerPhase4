import{f as Ut,g as $,h as Ne,m as jt,n as Ce,p as Vt,u as Gt}from"./chunk-MNUIVIRZ.js";import{B as qt}from"./chunk-54WS224Y.js";import{a as Ft,b as Bt}from"./chunk-6E5FPUTW.js";import{a as be,b as A,c as Nt,d as Ct,e as kt}from"./chunk-XFWSRHR4.js";import{b as ve,d as w,f as _e,g as ye,h as xt,j as Oe,l as Ee,n as Dt,o as Lt,p as Te,q as At,r as Mt,s as It,t as Rt,u as Ot,v as Ht,x as we}from"./chunk-43DCFWML.js";import{a as bt,b as me,c as vt,d as he,e as _t,f as yt,g as Et,h as Tt,i as ge,j as wt,m as St,n as U,o as Pt,p as Se}from"./chunk-2GWGYD35.js";import{$ as b,$a as oe,$b as at,Ac as R,Ba as j,Cb as _,Da as Ke,Eb as y,Ec as mt,Fc as ht,Gc as gt,Jb as P,Kb as q,Lb as F,Mb as tt,Nb as c,Ob as B,Pb as ue,Qb as Ie,S as G,Sa as u,T as je,Ta as m,Ua as Xe,Ub as de,V as E,Vb as L,W as X,Wa as ne,Wb as Re,Xb as rt,Y as ee,Ya as ie,Yb as nt,Zb as it,_ as I,_a as ae,ac as ot,da as te,db as Qe,ea as D,f as qe,fa as Q,ha as re,hb as v,hc as st,ib as H,jb as d,k as Ae,kb as se,la as Ve,lb as Ye,lc as pe,ma as S,mb as $e,na as N,nc as ct,oa as Me,ob as ce,pa as Ge,pb as Ze,qc as V,rb as Je,rc as lt,sb as et,tb as o,u as M,ua as ze,ub as s,v as Fe,vb as h,vc as ut,w as Be,wc as dt,xc as fe,ya as We,yb as le,yc as pt,z as Ue,zb as Y,zc as ft}from"./chunk-53WIH66V.js";import{f as Pe}from"./chunk-6GU5JNHE.js";var C=(()=>{let r=class r{constructor(){this.JWT_TOKEN="JWT_TOKEN",this.router=b(A),this.http=b(me),this.toaster=b(U),this.mybackendUrl=Se.backendUrl,this.newloginurl=`${this.backendUrl}/login`}get backendUrl(){return this.mybackendUrl}ngOnInit(){}login(e){return this.http.post(this.newloginurl,e).pipe(G(t=>{console.log("SERVER",t),this.doLoginUser(t.token)}))}doLoginUser(e){console.log("With stringify token",e),console.log(typeof e),this.storeJwtToken(e)}storeJwtToken(e){return localStorage.setItem(this.JWT_TOKEN,e)}getJwtToken(){return console.log("sdadadsadsa"),localStorage.getItem(this.JWT_TOKEN)}logout(){localStorage.removeItem(this.JWT_TOKEN),this.router.navigate(["login"])}isLoggedIn(){return typeof localStorage<"u"?!!localStorage.getItem(this.JWT_TOKEN):!1}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();var Wt=(()=>{let r=class r{constructor(e,t){this.router=e,this.authService=t,this.toaster=b(U),this.username=new Oe("admin",[w.required,w.minLength(3),w.maxLength(20)]),this.password=new Oe("111111",[w.required,w.minLength(6)]),this.loginForm=new xt({username:this.username,password:this.password})}ngOnInit(){}login(){if(this.loginForm.invalid){this.toaster.error("Please fill username and password","! Incomplete form");return}let e=this.loginForm.value;console.log("Login"),console.log(e),this.authService.login(e).subscribe(t=>{console.log(t),t.success===!0?(this.toaster.success("Tu sahi hai bro","Success"),this.router.navigate(["dashboard"]),console.log("Dashborard route success")):this.toaster.error(t.message)},t=>{console.log("LOGIN ERROR",t),this.toaster.error(t.message,"! Invalid credentials")})}};r.\u0275fac=function(t){return new(t||r)(m(A),m(C))},r.\u0275cmp=D({type:r,selectors:[["app-login"]],standalone:!0,features:[de([C]),L],decls:12,vars:3,consts:[[1,"loginform"],[3,"ngSubmit","formGroup"],["type","text","placeholder","Username",3,"formControl"],["type","password","placeholder","Password",3,"formControl"],["type","submit"]],template:function(t,i){t&1&&(o(0,"div",0)(1,"h2"),c(2,"Login"),s(),o(3,"form",1),_("ngSubmit",function(){return i.login()}),o(4,"small"),c(5,"Username"),s(),h(6,"input",2),o(7,"small"),c(8,"Password"),s(),h(9,"input",3),o(10,"button",4),c(11,"Submit"),s()()()),t&2&&(u(3),d("formGroup",i.loginForm),u(3),d("formControl",i.username),u(3),d("formControl",i.password))},dependencies:[R,we,Ee,ve,_e,ye,Lt,Te],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Arial}.loginform[_ngcontent-%COMP%]{background:#fff;width:500px;height:400px;color:#007bff;left:50%;top:40%;position:absolute;transform:translate(-50%,-50%);box-sizing:border-box;padding:20px;border-radius:5px;box-shadow:0 10px 29px #e0e0e0}.loginform[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px;margin:30px 0;text-transform:uppercase;font-weight:bolder;text-align:center}.loginform[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;margin-bottom:30px}.loginform[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{border:none;border-bottom:1px solid #1e5220;background:transparent;outline:none;height:40px;color:#333;font-size:16px}.loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:#007bff;font-weight:700;color:#fff;font-size:20px;padding:10px;border-radius:5px;transition:.4s;border:none;margin-bottom:5px;width:100%}.loginform[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background:#6b6c6b;color:#fff;font-size:20px;padding:10px;border-radius:5px;transition:.4s;border:none;margin-bottom:5px;width:100%}.loginform[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;font-size:15px;line-height:20px;color:#1e5220}.loginform[_ngcontent-%COMP%]   .have-not[_ngcontent-%COMP%]{float:right}.loginform[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#007bff}@media (max-width: 576px){.loginform[_ngcontent-%COMP%]{width:90%}.loginform[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;text-align:center;float:inherit!important;margin:10px 0}input[_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:15px;border:1px solid #ccc;border-radius:3px;box-sizing:border-box}}"]});let n=r;return n})();var x=(n,r)=>{let a=b(C),e=b(A);return a.isLoggedIn()?(console.log("Success FROM AUTHGUARD"),!0):(console.log("RETURNED FROM AUTHGUARD"),e.navigate(["login"]),!1)};var hr=["determinateSpinner"];function gr(n,r){if(n&1&&(Me(),o(0,"svg",11),h(1,"circle",12),s()),n&2){let a=y();H("viewBox",a._viewBox()),u(),se("stroke-dasharray",a._strokeCircumference(),"px")("stroke-dashoffset",a._strokeCircumference()/2,"px")("stroke-width",a._circleStrokeWidth(),"%"),H("r",a._circleRadius())}}var br=new ee("mat-progress-spinner-default-options",{providedIn:"root",factory:vr});function vr(){return{diameter:Kt}}var Kt=100,_r=10,Xt=(()=>{let r=class r{get color(){return this._color||this._defaultColor}set color(e){this._color=e}constructor(e,t,i){this._elementRef=e,this._defaultColor="primary",this._value=0,this._diameter=Kt,this._noopAnimations=t==="NoopAnimations"&&!!i&&!i._forceAnimations,this.mode=e.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",i&&(i.color&&(this.color=this._defaultColor=i.color),i.diameter&&(this.diameter=i.diameter),i.strokeWidth&&(this.strokeWidth=i.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_circleRadius(){return(this.diameter-_r)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}};r.\u0275fac=function(t){return new(t||r)(m(ze),m(j,8),m(br))},r.\u0275cmp=D({type:r,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(t,i){if(t&1&&P(hr,5),t&2){let l;q(l=F())&&(i._determinateCircle=l.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(t,i){t&2&&(H("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",i.mode==="determinate"?i.value:null)("mode",i.mode),$e("mat-"+i.color),se("width",i.diameter,"px")("height",i.diameter,"px")("--mdc-circular-progress-size",i.diameter+"px")("--mdc-circular-progress-active-indicator-width",i.diameter+"px"),Ye("_mat-animation-noopable",i._noopAnimations)("mdc-circular-progress--indeterminate",i.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[te.HasDecoratorInputTransform,"value","value",pe],diameter:[te.HasDecoratorInputTransform,"diameter","diameter",pe],strokeWidth:[te.HasDecoratorInputTransform,"strokeWidth","strokeWidth",pe]},exportAs:["matProgressSpinner"],standalone:!0,features:[Qe,L],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(t,i){if(t&1&&(v(0,gr,2,8,"ng-template",null,0,it),o(2,"div",2,1),Me(),o(4,"svg",3),h(5,"circle",4),s()(),Ge(),o(6,"div",5)(7,"div",6)(8,"div",7),le(9,8),s(),o(10,"div",9),le(11,8),s(),o(12,"div",10),le(13,8),s()()()),t&2){let l=tt(1);u(4),H("viewBox",i._viewBox()),u(),se("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeDashOffset(),"px")("stroke-width",i._circleStrokeWidth(),"%"),H("r",i._circleRadius()),u(4),d("ngTemplateOutlet",l),u(2),d("ngTemplateOutlet",l),u(2),d("ngTemplateOutlet",l)}},dependencies:[pt],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0});let n=r;return n})();var Qt=(()=>{let r=class r{};r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=Q({type:r}),r.\u0275inj=X({imports:[R,qt]});let n=r;return n})();var z=(()=>{let r=class r{ngOninit(){this.loader=!1}startloading(){this.loader=!0,console.log(this.loader)}stoploading(){this.loader=!1}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();var W=(()=>{let r=class r{constructor(e){this.darshan=e,this.loader=!1}startloading(){this.darshan.startloading()}stoploading(){this.darshan.stoploading()}checkstatus(){return this.darshan.loader}};r.\u0275fac=function(t){return new(t||r)(I(z))},r.\u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();var xe=(()=>{class n{constructor(){this.expired$=new qe}startWatching(a){return this.idle$=Be(M(document,"mousemove"),M(document,"click"),M(document,"mousedown"),M(document,"keypress"),M(document,"DOMMouseScroll"),M(document,"mousewheel"),M(document,"touchmove"),M(document,"MSPointerMove"),M(window,"mousemove"),M(window,"resize")),this.timeOutMilliSeconds=a*1e3,this.idleSubscription=this.idle$.subscribe(e=>{this.resetTimer()}),this.startTimer(),this.expired$}startTimer(){this.timer$=Fe(this.timeOutMilliSeconds,this.timeOutMilliSeconds).subscribe(a=>{this.expired$.next(!0)})}resetTimer(a){this.timer$.unsubscribe(),a&&(this.timeOutMilliSeconds=a*1e3),this.startTimer()}stopTimer(){this.timer$.unsubscribe(),this.idleSubscription.unsubscribe()}}return n.\u0275fac=function(a){return new(a||n)},n.\u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Sr(n,r){if(n&1&&(o(0,"span",31),c(1),s()),n&2){let a=y();u(),B(a.notificationNumnber)}}function Nr(n,r){n&1&&(o(0,"div",32)(1,"div",33),h(2,"mat-progress-spinner",34),s()())}var $t=(()=>{let r=class r{constructor(e,t,i,l,p,g,f,T){this.loadingService=e,this.router=t,this.authservice=i,this.bnIdle=l,this.cdr=p,this.darshan=g,this.pushNotificationService=f,this.socketService=T,this.namber=0,this.isLoaded=!1}NotificationCounter(){this.socketService.listen("NoDriverFound").subscribe({next:e=>{console.log("notificatipn---> NODRIVER number",e),this.pushNotificationService.dashboardProperty$.subscribe(t=>{console.log("type od res",typeof t),console.log("DASHBOARD PUSH NOTITIFICATION service is called ",t),this.notificationNumnber=t})}})}ngOnInit(){this.getNotificationCount(),this.darshan.loader=!1,console.log("isloaded",this.isLoaded),console.warn("Timer Started Listening"),this.bnIdle.startWatching(20*20*60).subscribe(e=>{typeof document<"u"&&e&&(console.log("------------------------------------------------------------------------------------------------------------------------"),this.authservice.logout(),this.bnIdle.stopTimer(),console.warn("session expired"),console.log("------------------------------------------------------------------------------------------------------------------------"))})}notify(e){let t=[];t.push({title:"Driver not Found",alertContent:"For the Ride "+e}),this.pushNotificationService.generateNotification(t)}Logout(){this.authservice.logout()}getNotificationCount(){this.socketService.emit("getNotification",""),this.socketService.listen("setNotification").subscribe({next:e=>{console.log("COUNTER SETNOTIFICATION-->>>>>>>",e),this.notify("No Driver Found for the Ride"),this.notificationNumnber=e}})}startloading(){this.loadingService.startloading()}stoploading(){this.loadingService.stoploading()}};r.\u0275fac=function(t){return new(t||r)(m(W),m(A),m(C),m(xe),m(st),m(z),m(Ft),m(Bt))},r.\u0275cmp=D({type:r,selectors:[["app-dashboard"]],standalone:!0,features:[de([W]),L],decls:69,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-dark","custom-navbar"],[1,"d-flex","container-fluid","justify-content-between"],[1,"fs-4","mx-3"],[1,"mx-3","d-flex","gap-3"],["type","button",1,"btn","btn-outline-light","me-2","position-relative"],[1,"bi","bi-bell"],["class","position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger",4,"ngIf"],[1,"dropdown"],["href","#","role","button","id","userDropdown","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","text-white","fs-5","dropdown-toggle"],["src","https://img.freepik.com/premium-vector/people-profile-graphic_24911-21373.jpg","alt","Photo",1,"rounded-circle","me-1",2,"width","30px","height","30px"],["aria-labelledby","userDropdown",1,"dropdown-menu","dropdown-menu-end"],[1,"dropdown-item","fw-bolder","fs-4",3,"click"],["id","wrapper",1,"row","m-0","p-0","d-flex","flex-row",2,"height","92.7vh"],["id","sidebar-wrapper",1,"col-xl-2","col-sm-3","bg-dark","text-white"],[1,"sidebar-nav","py-4",2,"width","94%"],[1,"fs-4","mb-3"],[1,"list-unstyled"],["routerLink","create-ride","routerLinkActive","active"],["routerLink","confirmed-ride","routerLinkActive","active"],["routerLink","ride-history","routerLinkActive","active"],["routerLink","users","routerLinkActive","active",1,"fs-4","mb-3"],["routerLink","lists","routerLinkActive","active"],["routerLink","running-requests","routerLinkActive","active"],["routerLink","country","routerLinkActive","active"],["routerLink","city","routerLinkActive","active"],["routerLink","vehicles-types","routerLinkActive","active"],["routerLink","vehicle-pricing","routerLinkActive","active"],["routerLink","settings","routerLinkActive","active",1,"fs-4","mb-3"],["id","page-content-wrapper",1,"col-xl-10","col-sm-9","col-12","m-0","p-0",2,"height","92.5vh","overflow-y","auto"],["class","spinnerconent",4,"ngIf"],[1,"container-fluid","mt-2"],[1,"position-absolute","top-0","start-100","translate-middle","badge","rounded-pill","bg-danger"],[1,"spinnerconent"],[1,"spinnerclass"],["color","accent","mode","indeterminate","value","50"]],template:function(t,i){t&1&&(o(0,"nav",0)(1,"div",1)(2,"div")(3,"span",2),c(4,"ADMIN PANEL"),s()(),o(5,"div",3)(6,"button",4),h(7,"i",5),v(8,Sr,2,1,"span",6),s(),o(9,"div",7)(10,"a",8),h(11,"img",9),c(12," Ankit "),s(),o(13,"ul",10)(14,"li")(15,"a",11),_("click",function(){return i.Logout()}),c(16,"+Logout"),s()()()()()()(),o(17,"div",12)(18,"div",13)(19,"ul",14)(20,"li")(21,"span",15),c(22,"Rides"),s(),o(23,"ul",16)(24,"li")(25,"a",17),c(26,"Create Ride"),s()(),o(27,"li")(28,"a",18),c(29,"Confirmed Ride"),s()(),o(30,"li")(31,"a",19),c(32,"Ride History"),s()()()(),o(33,"li")(34,"a",20),c(35,"Users"),s()(),o(36,"li")(37,"span",15),c(38,"Drivers"),s(),o(39,"ul",16)(40,"li")(41,"a",21),c(42,"Lists"),s()(),o(43,"li")(44,"a",22),c(45,"Running requests"),s()()()(),o(46,"li")(47,"span",15),c(48,"Pricing"),s(),o(49,"ul",16)(50,"li")(51,"a",23),c(52,"Country"),s()(),o(53,"li")(54,"a",24),c(55,"City"),s()(),o(56,"li")(57,"a",25),c(58,"Vehicles Types"),s()(),o(59,"li")(60,"a",26),c(61,"Vehicle Pricing"),s()()()(),o(62,"li")(63,"a",27),c(64,"Settings"),s()()()(),o(65,"div",28),v(66,Nr,3,0,"div",29),o(67,"div",30),h(68,"router-outlet"),s()()()),t&2&&(u(8),d("ngIf",i.notificationNumnber>0),u(58),d("ngIf",i.darshan.loader))},dependencies:[be,Nt,Ct,R,fe,Qt,Xt],styles:[".custom-navbar[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;height:70px}.notification-badge[_ngcontent-%COMP%]{position:absolute;top:.3rem;right:11rem;padding:4px 8px;border-radius:50%;background-color:red;color:#fff;font-size:12px}.sidebar-nav[_ngcontent-%COMP%]{position:absolute;top:0;margin:0;padding:0;list-style:none}.sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{text-indent:20px;line-height:40px}.sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;text-decoration:none;color:#999}.sidebar-nav[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none;color:#fff;background:#fff3}.sidebar-nav[_ngcontent-%COMP%] > .sidebar-brand[_ngcontent-%COMP%]{height:65px;font-size:18px;line-height:60px}.sidebar-nav[_ngcontent-%COMP%] > .sidebar-brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#999}.sidebar-nav[_ngcontent-%COMP%] > .sidebar-brand[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;background:none}.mb10[_ngcontent-%COMP%]{margin-top:10px}.active[_ngcontent-%COMP%]{background-color:#454646;font-size:18px;transition:.25s}@media screen and (min-width: 700px){#sidebar-wrapper[_ngcontent-%COMP%], .sidebar-nav[_ngcontent-%COMP%]{height:100vh}}@media screen and (max-width: 700px){#sidebar-wrapper[_ngcontent-%COMP%], .sidebar-nav[_ngcontent-%COMP%]{height:100vh;width:100vw}}.spinnerconent[_ngcontent-%COMP%]{position:fixed;width:100%;inset:0;background-color:#ffffffb3;z-index:9999;display:flex;text-align:center}.spinnerclass[_ngcontent-%COMP%]{position:fixed;width:50%;inset:40% 0 0 50%}"]});let n=r;return n})();var Zt=(()=>{let r=class r{constructor(e){this.http=e,this.backendUrl=Se.backendUrl,this.serverurl=this.backendUrl+"/rides"}getCallCodes(e){return this.http.get(this.serverurl+e)}isUser(e,t,i){return this.http.post(this.serverurl+e,{countryid:t,phone:i})}getPricingData(e,t){return this.http.post(this.serverurl+e,{id:t})}booknewRide(e,t){return this.http.post(this.serverurl+e,t)}isLocationInsideZone(e,t){return this.http.post(this.serverurl+e,t)}};r.\u0275fac=function(t){return new(t||r)(I(me))},r.\u0275prov=E({token:r,factory:r.\u0275fac,providedIn:"root"});let n=r;return n})();var kr=["mapContainer"],xr=["fromLocationRef"],Dr=["toLocationRef"],Lr=["waypointLocationRef"],Ar=["mySelect"],Jt=n=>({showform:n});function Mr(n,r){if(n&1&&(o(0,"option",34),c(1),s()),n&2){let a=r.$implicit;d("value",a.countryid._id),H("data-currency",a.countryid.ccurr)("data-id",a.countryid.ccode),u(),Ie(" ",a.countryid.ccallcode," (",a.countryid.ccode,") ")}}function Ir(n,r){n&1&&(o(0,"div"),c(1,"Call code is required"),s())}function Rr(n,r){if(n&1&&(o(0,"div",35),v(1,Ir,2,0,"div",36),s()),n&2){let a,e=y();u(),d("ngIf",(a=e.Rideform.get("callCode").errors)==null?null:a.required)}}function Or(n,r){n&1&&(o(0,"div"),c(1,"Input must be a number"),s())}function Hr(n,r){n&1&&(o(0,"div"),c(1,"Phone number is required"),s())}function Pr(n,r){n&1&&(o(0,"div"),c(1,"Please enter a 10 digit phone number"),s())}function qr(n,r){if(n&1&&(o(0,"div",35),v(1,Or,2,0,"div",36)(2,Hr,2,0,"div",36)(3,Pr,2,0,"div",36),s()),n&2){let a,e,t,i=y();u(),d("ngIf",(a=i.Rideform.get("phoneNumber").errors)==null?null:a.notANumber),u(),d("ngIf",(e=i.Rideform.get("phoneNumber").errors)==null?null:e.required),u(),d("ngIf",(t=i.Rideform.get("phoneNumber").errors)==null?null:t.pattern)}}function Fr(n,r){if(n&1){let a=Y();o(0,"div",13)(1,"div",37),c(2," User Details "),s(),o(3,"div",38)(4,"div",39)(5,"table",40)(6,"tbody")(7,"tr")(8,"td",41),c(9,"Name"),s(),o(10,"td"),c(11),s()(),o(12,"tr")(13,"td",41),c(14,"E-mail"),s(),o(15,"td"),c(16),s()(),o(17,"tr")(18,"td",41),c(19,"Phone"),s(),o(20,"td"),c(21),s()(),o(22,"tr",17)(23,"td",42)(24,"button",43),_("click",function(){S(a);let t=y();return N(t.PrevHomePage())}),c(25,"Prev"),s(),o(26,"button",44),_("click",function(){S(a);let t=y();return N(t.okGotIt())}),c(27,"Next"),s()()()()()()()()}if(n&2){let a=y();d("ngClass",Re(4,Jt,!a.showUserDetails)),u(11),B(a.userFound.uname),u(5),B(a.userFound.uemail),u(5),B(a.userFound.uphone)}}function Br(n,r){n&1&&(o(0,"div",45)(1,"label",46),c(2,"Payment Options : "),s(),o(3,"div",47)(4,"label",48),h(5,"input",49),o(6,"div",50),c(7,"Cash"),s()()(),o(8,"div",51)(9,"label",52),h(10,"input",53),o(11,"span",50),c(12,"Card"),s()()()())}function Ur(n,r){n&1&&(o(0,"div"),c(1,"From location is required"),s())}function jr(n,r){if(n&1&&(o(0,"div",54),v(1,Ur,2,0,"div",36),s()),n&2){let a,e=y();u(),d("ngIf",(a=e.waypointsForm.get("from").errors)==null?null:a.required)}}function Vr(n,r){n&1&&(o(0,"div",54),c(1,"Service is not available at this place "),s())}function Gr(n,r){n&1&&(o(0,"div"),c(1,"To location is required"),s())}function zr(n,r){if(n&1&&(o(0,"div",54),v(1,Gr,2,0,"div",36),s()),n&2){let a,e=y();u(),d("ngIf",(a=e.waypointsForm.get("to").errors)==null?null:a.required)}}function Wr(n,r){if(n&1){let a=Y();o(0,"div",55)(1,"span",56),c(2),s(),o(3,"span",57),_("click",function(){let t=S(a).index,i=y();return N(i.removeWaypoint(t))}),c(4,"X"),s()()}if(n&2){let a=r.$implicit;u(2),B(a)}}function Kr(n,r){if(n&1&&(o(0,"div",65)(1,"div",17),c(2),s(),o(3,"div",17)(4,"b"),c(5),rt(6,"number"),s()()()),n&2){let a=r.$implicit,e=y(2);u(2),ue("",a.vehiclename,":"),u(3),Ie(" ",nt(6,3,a.Totalprice,"1.2-2")," ",e.selectedCurrency,"")}}function Xr(n,r){if(n&1&&(o(0,"option",34),c(1),s()),n&2){let a=r.$implicit;d("value",a.vehicleid),u(),ue("",a.vehiclename," ")}}function Qr(n,r){n&1&&(o(0,"div",35),c(1," Please select a Service Type. "),s())}function Yr(n,r){n&1&&(o(0,"div",73),h(1,"input",84),o(2,"label",85),c(3,"Card"),s()())}function $r(n,r){n&1&&(o(0,"div",35),c(1," Please select a payment option. "),s())}function Zr(n,r){n&1&&(o(0,"div",35),c(1," Date and Time is required "),s())}function Jr(n,r){n&1&&(o(0,"div",35),c(1," Date and Time cannot be in the past "),s())}function en(n,r){if(n&1&&(o(0,"div",69)(1,"div")(2,"label",86),c(3,"Select Date and Time:"),s(),h(4,"input",87),s(),v(5,Zr,2,0,"div",12)(6,Jr,2,0,"div",12),s()),n&2){let a,e,t=y(2);u(5),d("ngIf",((a=t.BookingrideForm.get("DateTime"))==null?null:a.hasError("required"))&&((a=t.BookingrideForm.get("DateTime"))==null?null:a.touched)),u(),d("ngIf",((e=t.BookingrideForm.get("DateTime"))==null?null:e.hasError("pastDate"))&&((e=t.BookingrideForm.get("DateTime"))==null?null:e.touched))}}function tn(n,r){if(n&1){let a=Y();o(0,"div",31)(1,"div",58)(2,"div",59)(3,"div")(4,"div",60),c(5,"Ride Details"),s(),o(6,"ul",61)(7,"div",62)(8,"span",63),c(9,"Total Distance: "),s(),o(10,"span",63)(11,"b"),c(12),s()()(),o(13,"div",62)(14,"span",63),c(15,"Total Time:"),s(),o(16,"span",63)(17,"b"),c(18),s()()()(),o(19,"div",64),c(20,"Fare Price For available Servicetypes "),s(),Je(21,Kr,7,6,"div",65,Ze),s()()(),o(23,"div",66)(24,"div",67)(25,"form",68)(26,"div",69)(27,"label",70),c(28,"Select Service Type:"),s(),o(29,"select",71),v(30,Xr,2,2,"option",8),s(),v(31,Qr,2,0,"div",12),s(),o(32,"div",69)(33,"label",72),c(34,"Payment Options:"),s(),h(35,"br"),o(36,"div",73),h(37,"input",74),o(38,"label",75),c(39,"Cash"),s()(),v(40,Yr,4,0,"div",76)(41,$r,2,0,"div",12),s(),o(42,"div",69)(43,"label",72),c(44,"Select Booking Option :"),s(),h(45,"br"),o(46,"div",73)(47,"input",77),_("change",function(){S(a);let t=y();return N(t.onchangeDateandTime())}),s(),o(48,"label",78),c(49,"Book Now"),s()(),o(50,"div",73)(51,"input",79),_("change",function(){S(a);let t=y();return N(t.onchangeDateandTime())}),s(),o(52,"label",80),c(53,"Schedule"),s()()(),v(54,en,7,2,"div",69),o(55,"div",81)(56,"button",82),_("click",function(){S(a);let t=y();return N(t.onBackPage())}),c(57,"Previous"),s(),o(58,"button",83),_("click",function(){S(a);let t=y();return N(t.onSubmitRide())}),c(59,"Submit"),s()()()()()()}if(n&2){let a=y();u(12),ue("",a.rideDistance," Km"),u(6),B(a.rideTime),u(3),et(a.ServicePricing),u(4),d("formGroup",a.BookingrideForm),u(5),d("ngForOf",a.availableServicetype),u(),d("ngIf",a.BookingrideForm.get("serviceType").touched&&a.BookingrideForm.get("serviceType").invalid),u(9),d("ngIf",a.hasCard),u(),d("ngIf",a.BookingrideForm.get("paymentOption").touched&&a.BookingrideForm.get("paymentOption").invalid),u(13),ce(54,a.BookingrideForm.get("bookingType").value==="schedule"?54:-1)}}function rn(n){let r=n.value;return isNaN(r)?{notANumber:!0}:null}var er=(()=>{let r=class r{constructor(e,t,i){this.fb=e,this.createRideService=t,this.toaster=i,this.hasCard=!1,this.waypointsArray=[],this.items=[],this.showUserDetails=!1,this.invalidInput=!1,this.showRideDetails=!1,this.isInsideZone=!0,this.showPricingDetails=!1,this.ServicePricing=[]}loadMap(){navigator.geolocation.getCurrentPosition(e=>{let t=e.coords,i={lat:t.latitude,lng:t.longitude};this.place=i,this.map=new google.maps.Map(document.getElementById("map"),{zoom:5,center:i})}),this.directionsService=new google.maps.DirectionsService,this.directionsRenderer=new google.maps.DirectionsRenderer}ngAfterViewInit(){this.loadMap(),console.log("Map has STARTED--------------------------------------")}ngOnInit(){this.waypointsForm=this.fb.group({from:["",w.required],to:["",w.required],waypoint:[""]}),this.BookingrideForm=this.fb.group({serviceType:["",w.required],paymentOption:["",w.required],bookingType:["bookNow",w.required],DateTime:[]}),this.Rideform=this.fb.group({callCode:["",w.required],phoneNumber:["",[w.required,w.pattern(/^[1-9]{1}[0-9]{9}$/),rn]]}),this.createRideService.getCallCodes("/call_codes").pipe(G(e=>{this.callCodes=e.data,console.warn("RESPONSE ",e.data),this.selectedCurrency=e.data[0].countryid.ccurr,this.selectedCountrycode=e.data[0].countryid.ccode,this.defaultcode=e.data[0].countryid._id,this.Rideform.get("callCode").setValue(this.defaultcode),console.log("this.defaultcode",this.defaultcode)})).subscribe()}formatDate(e){let t=e.getFullYear(),i=("0"+(e.getMonth()+1)).slice(-2),l=("0"+e.getDate()).slice(-2);return`${t}-${i}-${l}`}defaultTime(){return"23:59"}formatTime(e){let t=new Date(e.getTime()+6e4),i=("0"+t.getHours()).slice(-2),l=("0"+t.getMinutes()).slice(-2);return`${i}:${l}`}onchange(){let e=this.Rideform.get("callCode").value;console.log("https://github.com/prashantrrai/Eber-Admin-Panel",e)}PrevHomePage(){this.Rideform.get("phoneNumber").reset(),this.showUserDetails=!1}onCountrySelect(e){if(console.log(this.Rideform.get("phoneNumber").value),console.log(this.Rideform.get("phoneNumber").value.trim().length==10),console.log(this.Rideform.get("phoneNumber").value&&this.Rideform.get("phoneNumber").value.trim().length==10),this.Rideform.get("phoneNumber").value&&this.Rideform.get("phoneNumber").value.trim().length==10)if(console.log("This is inside the TRUE condition"),confirm("Are you sure you want to find User Again ? Doing this you have to follow all the steps from starting again !")){this.waypointsForm.reset(),this.BookingrideForm.reset(),this.showUserDetails=!1,this.showRideDetails=!1,this.showPricingDetails=!1,this.directionsRenderer.setMap(null),console.log("this.map",this.map),this.map.setCenter(this.place),this.map.setZoom(5),this.toaster.warning("Please Select Phone Number Again","Warning");return}else{this.Rideform.get("callCode").setValue(this.selectedCountryId);return}let t=e.target.selectedOptions[0],i=t.dataset?t.dataset.currency:t.getAttribute("data-currency");this.selectedCurrency=i,console.log("Currency value is-->",i);let l=t.dataset?t.dataset.id:t.getAttribute("data-id");console.log("onCountrySelect",l),this.selectedCountrycode=l}onKeyPress(e){let t=e.charCode;t<48||t>57?(e.preventDefault(),this.invalidInput=!0):this.invalidInput=!1}markFormGroupTouched(e){e.markAllAsTouched()}onClear(){this.Rideform.reset(),this.Rideform.get("callCode").setValue(this.defaultcode),console.log(this.Rideform.value)}onSubmit(){if(this.showUserDetails=!1,this.showRideDetails=!1,this.showPricingDetails=!1,this.selectedCountryId=this.Rideform.get("callCode").value,this.markFormGroupTouched(this.Rideform),!this.Rideform.valid)return this.toaster.warning("Please complete the Form","Incomplete form"),null;this.createRideService.isUser("/is_user",this.selectedCountryId,this.Rideform.get("phoneNumber").value).subscribe({next:e=>{console.log("search result",e),e.success===!0&&e.data.user!==null&&(this.toaster.success(e.message,"Success"),this.userFound=e.data.user,this.stopCount=e.data.stopCount,this.userid=e.data.user._id,this.showUserDetails=!0,this.hasCard=e.data.hasCard),e.success===!1&&this.toaster.warning(e.message,"Unable to book")},error:e=>{console.log("is_User Error",e),this.toaster.error(e.error.error,"Invalid phone number")},complete:()=>{}})}okGotIt(){this.showUserDetails=!1,this.showRideDetails=!0,this.mapAutocomplete_init()}createAutocomplete(e,t){console.log("Autocomplete works here ---------------",this.selectedCountrycode);let i=new google.maps.places.Autocomplete(e);i.setComponentRestrictions({country:this.selectedCountrycode}),i.addListener("place_changed",()=>{let l=i.getPlace();this.handlePlaceChange(l,t)})}mapAutocomplete_init(){console.log("this.selectedCountrycode",this.selectedCountrycode);let e=document.getElementById("from"),t=document.getElementById("to"),i=document.getElementById("waypoint");this.autocompleteFrom=this.createAutocomplete(e,"from"),this.autocompleteTo=this.createAutocomplete(t,"to"),this.autocompleteWaypoint=this.createAutocomplete(i,"waypoint")}isLocationInside(e){this.createRideService.isLocationInsideZone("/isLocationInsideZone",e).subscribe({next:t=>{if(console.log("isLocationInsideZone RES",t),t.success===!0){this.toaster.success("WAAh bhai location is UNDER"),this.isInsideZone=!0;let i=this.fromLocationInput?.nativeElement.value;return this.selectedfromLocation=i,this.selectedcity=t.cityid,!0}else return this.toaster.error("SORRY BRO Baar che location"),!1},error:t=>(console.log("isLocationInsideZone Error",t),!1),complete:()=>{}})}handlePlaceChange(e,t){if(console.warn("place",e),!e.geometry){console.log("No details available for input: '"+e.name+"'"),this.waypointsForm.get("waypoint").setValue(""),this.toaster.warning("Please select place from given suggestions","Invalid Input");return}if(t==="from"){this.isInsideZone=!1;let i={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()};console.log("senddata",i),this.isLocationInside(i)}if(t==="to"){let i=this.toLocationInput?.nativeElement.value;this.selectedToLocation=i}if(t==="waypoint"){let i=this.waypointLocationInput?.nativeElement.value;this.selectedWaypointLocation=i}}onCalculate(){if(this.markFormGroupTouched(this.waypointsForm),this.waypointsForm.invalid)return this.toaster.error("please Fill all Ride details","Incomplete Form"),null}addWaypoint(){let e="sdasd",t=this.waypointLocationInput?.nativeElement.value;if(t.trim()===""||this.selectedWaypointLocation!==t){this.toaster.warning("Please select Waypoint from suggesstion","Warning");return}if(this.waypointsArray.length>=this.stopCount){this.toaster.warning("Max Stops Allready added","Stop Limit"),this.waypointsForm.get("waypoint").setValue("");return}this.waypointsArray.push(t),this.waypointsForm.get("waypoint").reset(),console.log("waypoints",this.waypointsArray),this.selectedWaypointLocation=null}removeWaypoint(e){this.waypointsArray.splice(e,1),console.log("waypoints",this.waypointsArray),this.directionsRenderer.setMap(null)}after_insidelocation(e,t){console.log(e,t,this.waypointsArray),this.showRideDetails=!1,this.directionsService.route({origin:e,destination:t,waypoints:this.waypointsArray.map(i=>({location:i,stopover:!0})),travelMode:google.maps.TravelMode.DRIVING,region:this.selectedCountrycode},(i,l)=>{console.log("RESPONSE",i),l==="OK"?(this.directionsRenderer.setMap(null),this.directionsRenderer=new google.maps.DirectionsRenderer({polylineOptions:{strokeColor:"blue",strokeWeight:4}}),this.getAllPricingdata(this.selectedcity,i)):l==="ZERO_RESULTS"?(this.isRoute=!1,alert("No route found for given locations!"),this.directionsRenderer.setMap(null),console.log("No route found for given locations! "+l)):(this.isRoute=!1,alert("Select location from auto suggestion "),this.directionsRenderer.setMap(null),console.log("Select location from auto suggestion "+l))})}Calculate(){console.log("this.selectedCurrenct",this.selectedCurrency),this.markFormGroupTouched(this.waypointsForm),console.log("calculate is clicked");let e=this.fromLocationInput?.nativeElement.value,t=this.toLocationInput?.nativeElement.value;if(!this.isInsideZone)return this.toaster.warning("Service is not available at this 'From' location","! Invalid Input"),null;if(this.selectedToLocation!==t||this.selectedfromLocation!==e)return this.toaster.warning("Please select From: and To: from Auto-Suggestion","! Invalid Input"),null;if(!this.isInsideZone||e===t&&(e===this.waypointsArray[0]||t===this.waypointsArray[this.waypointsArray.length-1])){this.toaster.warning("Please select appropriate Location","! Invalid From location");return}this.after_insidelocation(e,t)}getAllPricingdata(e,t){this.createRideService.getPricingData("/get_pricing",e).subscribe({next:i=>{if(console.log("getAllPricingdata",i),i.success==="true"&&i.data.length>0){this.directionsRenderer.setMap(this.map),this.directionsRenderer.setDirections(t),this.isRoute=!0;let l=i.data,p=t.routes[0].legs;console.log(p);let g=p.reduce((K,J)=>({distance:K.distance+J.distance.value,duration:K.duration+J.duration.value}),{distance:0,duration:0});console.log("FINAL RESULT",g);let f=g.distance;this.rideDistance=Number((f/1e3).toFixed(2)),this.rideDuration=g.duration/60;let T=g.duration;console.log("TotalTime--->",T);let Le=Math.floor(T/3600),Z=Math.floor(T%3600/60);this.rideTime=`${Le} hr ${Z} min`;let O=l.map(({vehicleData:K,distanceBasePrice:J,pricePerUnitDistance:ur,pricePerUnitTime:dr,basePrice:pr,minFare:fr})=>({vehicleid:K._id,vehiclename:K.vname,Totalprice:this.TotalPrice(f,T,J,ur,dr,pr,fr)}));this.ServicePricing=O,console.log("NEW MAPPED ARRAY",typeof O),this.showPricingDetails=!0,this.showRemainingForm(l)}else{this.toaster.info("No service Type available for this City","Sorry for the inconvinience"),this.waypointsForm.reset(),this.BookingrideForm.reset(),this.showUserDetails=!1,this.showRideDetails=!1,this.showPricingDetails=!1,this.directionsRenderer.setMap(null),this.map.setCenter(this.place),this.map.setZoom(5);return}},error:i=>{console.log("get_pricing Error",i)},complete:()=>{}})}TotalPrice(e,t,i,l,p,g,f){let T=e/1e3,Le=t/60,Z=0;T>i&&(Z=T-i);let O=Z*l+Le*p+g;return console.log("INITIAL pricing",O),O<f&&(O=f),console.log("TotalPricing",O),O}showRemainingForm(e){let t=new Date().toISOString().split("T")[0],i=e.map(({vehicleData:l})=>({vehiclename:l.vname,vehicleid:l._id}));this.availableServicetype=i,this.cityid=this.selectedcity,this.fromLocation=this.selectedfromLocation,this.toLocation=this.selectedToLocation,this.waypointsLocation=this.waypointsArray}onchangeDateandTime(){let e=this.BookingrideForm.get("bookingType").value,t=this.BookingrideForm.get("DateTime");e==="schedule"?(t?.setValidators([w.required,this.futureDateValidator]),console.log("DATE SELETED",t.value)):t?.clearValidators(),t?.updateValueAndValidity()}futureDateValidator(e){let t=new Date;return new Date(e.value)<=t?{pastDate:!0}:null}setCurrentTime(){let e=new Date,t=e.getFullYear(),i=("0"+(e.getMonth()+1)).slice(-2),l=("0"+e.getDate()).slice(-2),p=("0"+e.getHours()).slice(-2),g=("0"+e.getMinutes()).slice(-2),f=`${t}-${i}-${l}`,T=`${p}:${g}`;this.bookDate=f,this.bookTime=T,this.bookDateandTime=new Date().getTime(),console.log("Date:",f),console.log("Time:",T)}findVehicleById(e){return this.ServicePricing.find(t=>t.vehicleid===e)}onBackPage(){this.showUserDetails=!1,this.showRideDetails=!0,this.showPricingDetails=!1,this.BookingrideForm.reset()}onSubmitRide(){let e=this.BookingrideForm.get("DateTime");if(this.paymentType=this.BookingrideForm.get("paymentOption").value,this.markFormGroupTouched(this.BookingrideForm),this.BookingrideForm.invalid){this.toaster.error("Please complete the all Form Details with Validations","Invalid Form");return}console.log("THIS sdata->",this.BookingrideForm.get("bookingType").value);let t;if(this.BookingrideForm.get("bookingType").value==="bookNow"){if(this.setCurrentTime(),t=confirm("Are you sure You want to book Ride now ?"),!t)return}else if(console.log("this.BookingrideForm.getvalue",this.BookingrideForm.get("DateTime").value),this.BookingrideForm.get("DateTime").value){let[f,T]=this.BookingrideForm.get("DateTime").value.split("T");this.bookDate=f,this.bookTime=T,this.bookDateandTime=new Date(`${this.bookDate}T${this.bookTime}`).getTime(),t=confirm("Are you sure You have Selected this Date : "+this.bookDate+" "+this.bookTime)}console.log(this.BookingrideForm.value),console.log(this.waypointsForm.value);let i=this.toLocationInput?.nativeElement.value,l=this.fromLocationInput?.nativeElement.value;if(!t)return;this.vehicleid=this.BookingrideForm.get("serviceType").value,console.log(this.setCurrentTime());let p=this.findVehicleById(this.vehicleid);console.log("foundVehicle",p),this.estimatedFarePrice=p.Totalprice,console.log("-----------------------------------------------------------------------"),console.log(Number(this.rideDistance.toFixed(2))),console.log(this.rideDistance,"-------------------------",this.rideDuration),console.log("-----------------------------------------------------------------------");let g={userid:this.userid,cityid:this.cityid,vehicleid:this.vehicleid,fromLocation:this.fromLocation,toLocation:this.toLocation,waypointsLocation:this.waypointsLocation,bookDate:this.bookDate,bookTime:this.bookTime,rideDistance:this.rideDistance,rideDuration:Number(this.rideDuration.toFixed(2)),paymentType:this.paymentType,estimatedFarePrice:Number(this.estimatedFarePrice.toFixed(2)),estimatedTime:this.rideTime,bookDateandTime:this.bookDateandTime};console.log("ALLDATA",g),this.createRideService.booknewRide("/create_ride",g).subscribe({next:f=>{console.log("Create Ride res",f),f.success===!0&&(this.toaster.success(f.message,"Success"),this.waypointsForm.reset(),this.Rideform.get("phoneNumber").reset(),this.BookingrideForm.reset(),this.showUserDetails=!1,this.showRideDetails=!1,this.showPricingDetails=!1,this.directionsRenderer.setMap(null),console.log("this.map",this.map),this.map.setCenter(this.place),this.map.setZoom(5))},error:f=>{console.log("booknewRide Error",f),this.toaster.error(f.error.message,"Error")},complete:()=>{}})}pastTimeValidator(e){let t=new Date,i=new Date,[l,p]=e.value.split(":");return i.setHours(+l,+p,0,0),i<t?{pastTime:!0}:null}};r.\u0275fac=function(t){return new(t||r)(m(Ht),m(Zt),m(U))},r.\u0275cmp=D({type:r,selectors:[["app-create-ride"]],viewQuery:function(t,i){if(t&1&&(P(kr,5),P(xr,5),P(Dr,5),P(Lr,5),P(Ar,5)),t&2){let l;q(l=F())&&(i.mapContainer=l.first),q(l=F())&&(i.fromLocationInput=l.first),q(l=F())&&(i.toLocationInput=l.first),q(l=F())&&(i.waypointLocationInput=l.first),q(l=F())&&(i.mySelect=l.first)}},standalone:!0,features:[L],decls:46,vars:16,consts:[["fromLocationRef",""],["toLocationRef",""],["waypointLocationRef",""],[1,"container-fluid"],["id","maincontainer",1,"col-sm-12","m-0","mt-2","p-0"],[3,"ngSubmit","formGroup"],[1,"input-group","row","m-0","mb-2","mb-1","p-2","border","border-1","rounded-3",2,"font-size","16px","background-color","#e8f5e9"],["formControlName","callCode",1,"col-md-2","mr-2","col-sm-10","border","text-secondary","form-select",2,"max-width","8rem","min-width","6rem",3,"change"],[3,"value",4,"ngFor","ngForOf"],["type","text","formControlName","phoneNumber","placeholder","Phone Number",1,"border","form-control","p-2","col-md-8","col-xs-12",3,"keypress"],[1,"col-md-2","text-right","px-0","mx-0"],["type","submit",1,"btn","text-white","btn-info","mr-2","form-control",3,"disabled"],["class","text-danger",4,"ngIf"],[1,"col-5","my-2","m","p-2","mx-auto",3,"ngClass"],["class","paymentOption  mt-4 ml-4",4,"ngIf"],[1,"col-12","border","border-2","bg-light","p-3","px-3","rounded-2","my-1",3,"ngClass"],[1,"fw-bold","fs-4","text-center","text-info"],[1,""],[1,"form-group"],["for","from",2,"font-size","16px"],["type","text","id","from","formControlName","from","placeholder","From Location...","required","",1,"form-control"],["class","text-danger my-1",4,"ngIf"],["for","to",2,"font-size","16px"],["type","text","id","to","formControlName","to","placeholder","To Location...","required","",1,"form-control"],[1,"my-1",2,"font-size","16px"],[1,"input-group","my-2"],["type","text","id","waypoint","formControlName","waypoint","placeholder","Enter Waypoint here...","required","",1,"form-control"],["type","button",1,"btn","btn-secondary",2,"width","5rem",3,"click"],[1,"col-12","m-0","p-0"],["class","row m-0 p-0 mb-2 pr-2",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-info","form-control",3,"click"],[1,"row","d-flex","flex-row","justify-content-around","my-2"],[1,"container-fluid","row","m-0","p-0"],["id","map",1,"border","border-2",2,"height","41vh","width","100vw"],[3,"value"],[1,"text-danger"],[4,"ngIf"],[1,"card-header","fs-4","fw-bold","text-center","p-3","bg-warning",2,"color","rgb(28, 104, 245)"],[1,"custom-card","card-body"],[1,"table-responsive","p-2","bg-light","rounded-2"],[1,"table","p-0","m-0"],[1,"font-weight-bold"],["colspan","2"],["type","button",1,"btn","btn-dark","btn-sm",3,"click"],["type","button",1,"btn","btn-info","btn-sm","ml-2",3,"click"],[1,"paymentOption","mt-4","ml-4"],["for","paymentOption",1,"fw-bold","fs-5","mr-3","row"],[1,"form-check","row","mt-3"],["for","",1,""],["type","radio","formControlName","paymentOption","value","cash",1,"form-check-input","border","border-2","fs-5","my-0"],[1,"",2,"font-size","16px"],[1,"form-check","row"],["for",""],["type","radio","formControlName","paymentOption","value","card",1,"form-check-input","border","border-2","fs-5","my-0"],[1,"text-danger","my-1"],[1,"row","m-0","p-0","mb-2","pr-2"],["type"," text","disabled","","disabled","","id","added-waypoint",1,"col","border","border-2","rounded-2","p-2","bg-white","d-flex","align-items-center","justify-content-start",2,"font-size","16px"],[1,"btn","btn-danger","fs-5","d-flex","align-items-center","justify-content-center",2,"width","2.8rem",3,"click"],[1,"center-content","m-0","p-0","my-2","col-md-6"],[1,"card-body","d-flex","align-items-center","justify-content-center",2,"background-color","#e8f5e9","vertical-align","center"],[1,"text-info","my-2","p-2","fs-5","text-center","fw-bold"],[1,"list-group-prepend","centered-list","list-group-flush"],[1,"my-1"],[1,"col-6"],[1,"text-center","my-2","fs-4","text-align","fw-bold","text-info"],[1,"d-flex","my-2","justify-content-center","align-items-center","gap-3"],["id","BookRideCard",1,"col-md-6"],[1,"card-body"],[1,"ride-form",3,"formGroup"],[1,"mb-3"],["for","serviceType",1,"form-label"],["formControlName","serviceType","id","serviceType",1,"form-select"],[1,"form-label"],[1,"form-check","form-check-inline"],["type","radio","formControlName","paymentOption","id","paymentCash","value","cash",1,"form-check-input"],["for","paymentCash",1,"form-check-label"],["class","form-check form-check-inline",4,"ngIf"],["type","radio","formControlName","bookingType","id","bookingNow","value","bookNow",1,"form-check-input",3,"change"],["for","bookingNow",1,"form-check-label"],["type","radio","formControlName","bookingType","id","schedule","value","schedule",1,"form-check-input",3,"change"],["for","schedule",1,"form-check-label"],[1,"row","d-flex","justify-content-around","align-items-center"],[1,"btn","col-5","btn-dark",3,"click"],["type","submit",1,"btn","col-5","btn-primary",3,"click"],["type","radio","formControlName","paymentOption","id","paymentCard","value","card",1,"form-check-input"],["for","paymentCard",1,"form-check-label"],["for","scheduleDateTime"],["type","datetime-local","id","scheduleDateTime","formControlName","DateTime"]],template:function(t,i){if(t&1){let l=Y();o(0,"div",3)(1,"div",4)(2,"form",5),_("ngSubmit",function(){return S(l),N(i.onSubmit())}),o(3,"div",6)(4,"select",7),_("change",function(g){return S(l),N(i.onCountrySelect(g))}),v(5,Mr,2,5,"option",8),s(),o(6,"input",9),_("keypress",function(g){return S(l),N(i.onKeyPress(g))}),s(),o(7,"div",10)(8,"button",11),c(9,"Search"),s()()(),v(10,Rr,2,1,"div",12)(11,qr,4,3,"div",12)(12,Fr,28,6,"div",13)(13,Br,13,0,"div",14),s(),o(14,"div",15)(15,"div",16),c(16," Ride Details "),s(),o(17,"form",5),_("ngSubmit",function(){return S(l),N(i.onCalculate())}),o(18,"div",17)(19,"div",18)(20,"div",19),c(21,"From:"),s(),h(22,"input",20,0),v(24,jr,2,1,"div",21)(25,Vr,2,0,"div",21),s(),o(26,"div",18)(27,"div",22),c(28,"To:"),s(),h(29,"input",23,1),v(31,zr,2,1,"div",21),s()(),o(32,"div",24),c(33,"Waypoint:"),s(),o(34,"div",25),h(35,"input",26,2),o(37,"button",27),_("click",function(){return S(l),N(i.addWaypoint())}),c(38,"Add"),s()(),o(39,"div",28),v(40,Wr,5,1,"div",29),s(),o(41,"div",30),_("click",function(){return S(l),N(i.Calculate())}),c(42,"Calculate"),s()()(),v(43,tn,60,8,"div",31),s(),o(44,"div",32),h(45,"div",33),s()()}if(t&2){let l,p;u(2),d("formGroup",i.Rideform),u(3),d("ngForOf",i.callCodes),u(3),d("disabled",i.Rideform.invalid),u(2),d("ngIf",((l=i.Rideform.get("callCode"))==null?null:l.errors)&&((l=i.Rideform.get("callCode"))==null?null:l.touched)),u(),d("ngIf",i.Rideform.get("phoneNumber").errors&&((p=i.Rideform.get("phoneNumber"))==null?null:p.touched)),u(),ce(12,i.userFound?12:-1),u(),d("ngIf",0),u(),d("ngClass",Re(14,Jt,!i.showRideDetails)),u(3),d("formGroup",i.waypointsForm),u(7),d("ngIf",i.waypointsForm.get("from").invalid&&(i.waypointsForm.get("from").dirty||i.waypointsForm.get("from").touched)),u(),d("ngIf",!i.isInsideZone),u(6),d("ngIf",i.waypointsForm.get("to").invalid&&(i.waypointsForm.get("to").dirty||i.waypointsForm.get("to").touched)),u(9),d("ngForOf",i.waypointsArray),u(3),ce(43,i.showPricingDetails?43:-1)}},dependencies:[we,Ee,It,Rt,ve,Mt,Dt,_e,ye,Ot,Te,At,R,ut,dt,fe,ft],styles:["body[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;font-size:16px;line-height:1.6;margin:0;padding:0;background-color:#f8f9fa;color:#333}#map[_ngcontent-%COMP%]{border:5px solid grey}.card[_ngcontent-%COMP%]{border-radius:10px}.card-header[_ngcontent-%COMP%]{border-radius:10px 10px 0 0}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-collapse:collapse;border:none;width:80px;font-size:16px;text-align:center;vertical-align:middle}.table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f8f9fa}.font-weight-bold[_ngcontent-%COMP%]{font-weight:700}.showform[_ngcontent-%COMP%]{display:none}.center-content[_ngcontent-%COMP%]{display:flex;justify-content:center}.custom-card[_ngcontent-%COMP%]{width:100%;border:none;box-shadow:0 4px 8px #0000001a;transition:box-shadow .3s ease}.custom-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 16px #0003}.centered-list[_ngcontent-%COMP%]{list-style-type:none;padding:0;text-align:center}.centered-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;margin:0 10px}label[_ngcontent-%COMP%]{font-size:16px}"]});let n=r;return n})();var tr=(()=>{let r=class r{constructor(e,t){this.router=e,this.authservice=t}homepage(){this.router.navigate(["login"]),this.authservice.logout()}};r.\u0275fac=function(t){return new(t||r)(m(A),m(C))},r.\u0275cmp=D({type:r,selectors:[["app-notfound"]],standalone:!0,features:[L],decls:17,vars:0,consts:[[1,"page_404"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"col-sm-10","col-sm-offset-1","text-center"],[1,"four_zero_four_bg"],[1,"text-center"],[1,"contant_box_404"],[1,"h2"],[1,"link_404",3,"click"]],template:function(t,i){t&1&&(o(0,"p"),c(1,"notfound works!"),s(),o(2,"section",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"div",5)(8,"h1",6),c(9,"404"),s()(),o(10,"div",7)(11,"h3",8),c(12," Look like you're lost "),s(),o(13,"p"),c(14,"the page you are looking for not avaible!"),s(),o(15,"p",9),_("click",function(){return i.homepage()}),c(16,"Go to Home"),s()()()()()()())},dependencies:[R],styles:[".page_404[_ngcontent-%COMP%]{padding:40px 0;background:#fff;font-family:Arvo,serif}.page_404[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%}.four_zero_four_bg[_ngcontent-%COMP%]{background-image:url(https://cdn.dribbble.com/users/285475/screenshots/2083086/dribbble_1.gif);height:400px;background-position:center}.four_zero_four_bg[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .four_zero_four_bg[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:80px}.link_404[_ngcontent-%COMP%]{color:#fff!important;padding:10px 20px;background:#39ac31;margin:20px 0;display:inline-block}.contant_box_404[_ngcontent-%COMP%]{margin-top:-50px}"]});let n=r;return n})();var rr=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:Wt},{path:"dashboard",loadComponent:()=>$t,canActivate:[x],children:[{path:"create-ride",loadComponent:()=>er,canActivate:[x]},{path:"confirmed-ride",loadComponent:()=>import("./chunk-BU3WZLNV.js").then(n=>n.ConfirmedRideComponent),canActivate:[x]},{path:"ride-history",loadComponent:()=>import("./chunk-SAUNXGWO.js").then(n=>n.RideHistoryComponent),canActivate:[x]},{path:"users",loadComponent:()=>import("./chunk-VYBU7DTL.js").then(n=>n.UsersComponent),canActivate:[x]},{path:"lists",loadComponent:()=>import("./chunk-5YWPPXWR.js").then(n=>n.ListComponent),canActivate:[x]},{path:"running-requests",loadComponent:()=>import("./chunk-2NNZ6G62.js").then(n=>n.RunningRequestComponent),canActivate:[x]},{path:"country",loadComponent:()=>import("./chunk-RG3KZ2JP.js").then(n=>n.CountryComponent),canActivate:[x]},{path:"city",loadComponent:()=>import("./chunk-RFL2CQ6X.js").then(n=>n.CityComponent),canActivate:[x]},{path:"vehicles-types",loadComponent:()=>import("./chunk-A5WBQKMO.js").then(n=>n.VehicleTypeComponent),canActivate:[x]},{path:"vehicle-pricing",loadComponent:()=>import("./chunk-Y5WKGSIJ.js").then(n=>n.VehiclePricingComponent),canActivate:[x]},{path:"settings",loadComponent:()=>import("./chunk-MJVDMCR6.js").then(n=>n.SettingsComponent),canActivate:[x]}]},{path:"notfound",component:tr},{path:"**",redirectTo:"",pathMatch:"full"}];var an=(()=>{let r=class r extends Ce{constructor(e,t,i){super(e,t,i,b(ne,{optional:!0}))}ngOnDestroy(){this.flush()}};r.\u0275fac=function(t){return new(t||r)(I(V),I($),I(Ne))},r.\u0275prov=E({token:r,factory:r.\u0275fac});let n=r;return n})();function on(){return new jt}function sn(n,r,a){return new Gt(n,r,a)}var nr=[{provide:Ne,useFactory:on},{provide:Ce,useClass:an},{provide:ie,useFactory:sn,deps:[ge,Ce,oe]}],cn=[{provide:$,useFactory:()=>new Vt},{provide:j,useValue:"BrowserAnimations"},...nr],ln=[{provide:$,useClass:Ut},{provide:j,useValue:"NoopAnimations"},...nr];function ir(){return ae("NgEagerAnimations"),[...cn]}function ar(){return[...ln]}var or=(n,r)=>{let a=b(W),e=b(z);console.warn("INTERCEPTOR SERVICE ISRUNNED ");let t=b(C),i=b(A),l=b(U),p=t.getJwtToken();if(n.url.endsWith("/login"))return a.startloading(),console.log("Interceptor bypased due to login page"),r(n);if(p){a.startloading(),console.log("TOKEN FOUND INSIDE INTERCEPTOR");let g=n.clone({setHeaders:{Authorization:`Bearer ${p}`}});return r(g).pipe(G(f=>{f instanceof bt&&(console.log("RESPONSE TOKEN INTERCEPTOR STOPLOADING"),a.stoploading())},f=>{}),Ue(f=>{if(f.status===401){if(f.error.message==="Unauthorized: Token expired")return t.logout(),i.navigate(["/login"]),l.error(f.error.message,"Error"),null;if(f.error.message==="Forbidden: Invalid token")return t.logout(),i.navigate(["/login"]),l.error(f.error.message,"Error"),null}return a.stoploading(),Ae(f)}))}else return i.navigate(["login"]),console.error("TOKEN NOT FOUND"),Ae(new Error("Unauthorized: Missing or expired token"))};var un="@",dn=(()=>{let r=class r{constructor(e,t,i,l,p){this.doc=e,this.delegate=t,this.zone=i,this.animationType=l,this.moduleImpl=p,this._rendererFactoryPromise=null,this.scheduler=b(ne,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-T4DK2QM6.js")).catch(t=>{throw new je(5300,!1)}).then(({\u0275createEngine:t,\u0275AnimationRendererFactory:i})=>{this._engine=t(this.animationType,this.doc,this.scheduler);let l=new i(this.delegate,this._engine,this.zone);return this.delegate=l,l})}createRenderer(e,t){let i=this.delegate.createRenderer(e,t);if(i.\u0275type===0)return i;typeof i.throwOnSyntheticProps=="boolean"&&(i.throwOnSyntheticProps=!1);let l=new He(i);return t?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(p=>{let g=p.createRenderer(e,t);l.use(g)}).catch(p=>{l.use(i)}),l}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};r.\u0275fac=function(t){Xe()},r.\u0275prov=E({token:r,factory:r.\u0275fac});let n=r;return n})(),He=class{constructor(r){this.delegate=r,this.replay=[],this.\u0275type=1}use(r){if(this.delegate=r,this.replay!==null){for(let a of this.replay)a(r);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(r,a){return this.delegate.createElement(r,a)}createComment(r){return this.delegate.createComment(r)}createText(r){return this.delegate.createText(r)}get destroyNode(){return this.delegate.destroyNode}appendChild(r,a){this.delegate.appendChild(r,a)}insertBefore(r,a,e,t){this.delegate.insertBefore(r,a,e,t)}removeChild(r,a,e){this.delegate.removeChild(r,a,e)}selectRootElement(r,a){return this.delegate.selectRootElement(r,a)}parentNode(r){return this.delegate.parentNode(r)}nextSibling(r){return this.delegate.nextSibling(r)}setAttribute(r,a,e,t){this.delegate.setAttribute(r,a,e,t)}removeAttribute(r,a,e){this.delegate.removeAttribute(r,a,e)}addClass(r,a){this.delegate.addClass(r,a)}removeClass(r,a){this.delegate.removeClass(r,a)}setStyle(r,a,e,t){this.delegate.setStyle(r,a,e,t)}removeStyle(r,a,e){this.delegate.removeStyle(r,a,e)}setProperty(r,a,e){this.shouldReplay(a)&&this.replay.push(t=>t.setProperty(r,a,e)),this.delegate.setProperty(r,a,e)}setValue(r,a){this.delegate.setValue(r,a)}listen(r,a,e){return this.shouldReplay(a)&&this.replay.push(t=>t.listen(r,a,e)),this.delegate.listen(r,a,e)}shouldReplay(r){return this.replay!==null&&r.startsWith(un)}};function De(n="animations"){return ae("NgAsyncAnimations"),re([{provide:ie,useFactory:(r,a,e)=>new dn(r,a,e,n),deps:[V,ge,oe]},{provide:j,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var pn=(()=>{let r=class r{\u0275loadImpl(){return Pe(this,null,function*(){if(!this.xhrImpl){let{default:e}=yield import("./chunk-JKMDB23C.js");this.xhrImpl=e}})}build(){let e=this.xhrImpl;if(!e)throw new Error("Unexpected state in ServerXhr: XHR implementation is not loaded.");return new e.XMLHttpRequest}};r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=E({token:r,factory:r.\u0275fac});let n=r;return n})();function fn(n,r){let a=b(lt),{href:e,protocol:t,hostname:i,port:l}=a;if(!t.startsWith("http"))return r(n);let p=`${t}//${i}`;l&&(p+=`:${l}`);let g=a.getBaseHrefFromDOM()||e,f=new URL(g,p),T=new URL(n.url,f).toString();return r(n.clone({url:T}))}var mn=[{provide:gt,useClass:pn},{provide:vt,useValue:fn,multi:!0}];var hn=new ee("Server.RENDER_MODULE_HOOK");var gn=(()=>{let r=class r extends Tt{constructor(e){super(e),this.doc=e}supports(e){return!0}addEventListener(e,t,i){return ct().onAndCancel(e,t,i)}};r.\u0275fac=function(t){return new(t||r)(I(V))},r.\u0275prov=E({token:r,factory:r.\u0275fac});let n=r;return n})(),bn=[{provide:hn,useFactory:vn,deps:[V,We,Ke],multi:!0}];function vn(n,r,a){return()=>{let e=a.toJson();if(a.isEmpty)return;let t=n.createElement("script");t.id=r+"-state",t.setAttribute("type","application/json"),t.textContent=e,n.body.appendChild(t)}}var _n=[{provide:Et,multi:!0,useClass:gn}],yn=[bn,_n,mn,{provide:ot,useValue:null},{provide:at,useValue:null},{provide:mt,useClass:ht}];function sr(){return re([ar(),...yn])}var cr={providers:[kt(rr),Pt(),ir(),St(),he(_t([or])),De(),he(),xe,De(),De(),sr(),he(yt())]};var lr=(()=>{let r=class r{constructor(e){this.authService=e,this.title="Phase03"}ngOnInit(){console.log("+++++++++++++++++++++")}ngOnChanges(e){}ngDoCheck(){}};r.\u0275fac=function(t){return new(t||r)(m(C))},r.\u0275cmp=D({type:r,selectors:[["app-root"]],standalone:!0,features:[Ve,L],decls:1,vars:0,template:function(t,i){t&1&&h(0,"router-outlet")},dependencies:[be]});let n=r;return n})();wt(lr,cr).catch(n=>console.error(n));
